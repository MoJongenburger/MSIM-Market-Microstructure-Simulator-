<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MSIM Live Exchange</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="brand">
        <div class="brand__mark">MSIM</div>
        <div class="brand__meta">
          <div class="brand__title">Live Exchange</div>
          <div class="brand__sub">limit order book · deterministic engine</div>
        </div>
      </div>
    </div>

    <div class="topbar__center">
      <div class="stat">
        <div class="stat__label">LAST</div>
        <div class="stat__value" id="hdrLast">—</div>
      </div>
      <div class="stat">
        <div class="stat__label">BID</div>
        <div class="stat__value stat__value--bid" id="hdrBid">—</div>
      </div>
      <div class="stat">
        <div class="stat__label">ASK</div>
        <div class="stat__value stat__value--ask" id="hdrAsk">—</div>
      </div>
      <div class="stat">
        <div class="stat__label">SPREAD</div>
        <div class="stat__value" id="hdrSpr">—</div>
      </div>
    </div>

    <div class="topbar__right">
      <div class="conn">
        <div class="dot" id="connDot"></div>
        <div class="conn__text" id="connText">connecting…</div>
      </div>
      <div class="mono" id="hdrTs">ts=—</div>
    </div>
  </header>

  <main class="layout">
    <!-- LEFT: order entry + controls -->
    <section class="panel panel--left">
      <div class="panel__title">Order Entry</div>

      <div class="form">
        <div class="field">
          <label>Order ID</label>
          <input id="oid" value="1" />
        </div>

        <div class="field">
          <label>Side</label>
          <select id="side">
            <option>Buy</option>
            <option>Sell</option>
          </select>
        </div>

        <div class="field">
          <label>Type</label>
          <select id="type">
            <option>Limit</option>
            <option>Market</option>
          </select>
        </div>

        <div class="field">
          <label>TIF</label>
          <select id="tif">
            <option>GTC</option>
            <option>IOC</option>
            <option>FOK</option>
          </select>
        </div>

        <div class="field">
          <label>Price</label>
          <input id="price" value="100" />
        </div>

        <div class="field">
          <label>Qty</label>
          <input id="qty" value="10" />
        </div>

        <div class="actions">
          <button class="btn btn--primary" id="sendBtn">Submit</button>
          <button class="btn" id="cancelBtn">Cancel</button>
        </div>

        <div class="divider"></div>

        <div class="fieldRow">
          <div class="field">
            <label>New Qty</label>
            <input id="newQty" value="5" />
          </div>
          <button class="btn" id="modifyBtn">Modify</button>
        </div>

        <div class="hint">
          Tip: run the CLI agents separately if you want background flow. This UI is for manual interaction + live view.
        </div>
      </div>

      <div class="panel__title" style="margin-top:14px;">View</div>
      <div class="controls">
        <div class="control">
          <div class="control__label">Window</div>
          <div class="seg" id="winSeg">
            <button data-win="10">10s</button>
            <button data-win="60" class="is-active">1m</button>
            <button data-win="300">5m</button>
            <button data-win="900">15m</button>
            <button data-win="3600">1h</button>
            <button data-win="86400">1d</button>
          </div>
        </div>

        <div class="control">
          <div class="control__label">Candle</div>
          <select id="candleSel">
            <option value="auto" selected>auto</option>
            <option value="1">1s</option>
            <option value="5">5s</option>
            <option value="15">15s</option>
            <option value="60">1m</option>
            <option value="300">5m</option>
            <option value="900">15m</option>
          </select>
        </div>

        <div class="control">
          <div class="control__label">Depth</div>
          <select id="depthSel">
            <option value="5" selected>5</option>
            <option value="10">10</option>
            <option value="20">20</option>
          </select>
        </div>

        <div class="controlRow">
          <button class="btn" id="pauseBtn">Pause</button>
          <button class="btn" id="clearBtn">Clear</button>
        </div>
      </div>
    </section>

    <!-- CENTER: chart -->
    <section class="panel panel--center">
      <div class="panel__title">Chart</div>
      <div class="chartWrap">
        <canvas id="chart"></canvas>
        <div class="tooltip mono" id="chartTip" style="display:none;"></div>
      </div>
    </section>

    <!-- RIGHT: ladder + tape -->
    <section class="panel panel--right">
      <div class="panel__title">L2 Ladder</div>
      <div class="ladder">
        <div class="ladder__head mono">
          <div class="h r">Bid Cum</div>
          <div class="h r">Bid</div>
          <div class="h r">Px</div>
          <div class="h">Px</div>
          <div class="h">Ask</div>
          <div class="h">Ask Cum</div>
        </div>
        <div id="ladderBody"></div>
      </div>
      <div class="mono muted" id="ladderMeta" style="margin-top:8px;">—</div>

      <div class="panel__title" style="margin-top:14px;">Trades</div>
      <div class="tape">
        <table>
          <thead class="mono">
            <tr><th>ts</th><th>px</th><th>qty</th></tr>
          </thead>
          <tbody id="tapeBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>
